$(function(){$.queryToObject=function(e){var n,t,o=decodeURIComponent,r=e.split("&"),i={};return r.forEach(function(e){if(e.length){var r=e.indexOf("=");t=-1===r?(n=o(e),""):(n=o(e.slice(0,r)),o(e.slice(r+1))),"string"==typeof i[n]&&(i[n]=[i[n]]),Array.isArray(i[n])?i[n].push(t):i[n]=t}}),i},NCrecord=null,$.sendExposureManualiy=null,$.sendExposureManualiyArr=null;var e="main";-1<window.location.href.indexOf("newchic.in")?e="in":(-1<window.location.href.indexOf("ar.newchic.com")||-1<window.location.href.indexOf("newchic.com/ar/"))&&(e="ar"),window.G_SWITCH_CONFIG&&window.G_SWITCH_CONFIG.exposure&&window.G_SWITCH_CONFIG.exposure.pc&&window.G_SWITCH_CONFIG.exposure.pc[e]&&(window.nDCRecordExposure=function(e){},NCrecord={attr:"data-exposure-record",attrClick:"data-exposure-click",arrParams:["exClick","exModule","exInter"],vp:location.href,rp:document.referrer,elemObj:{},fixObj:{},exModuleObj:{},intersect:null,sendRecordArr:[],getElemUrl:function(e,r){var t=this;r=r||t.attr;var n=e.attr(r)||"",o=null;"true"===n&&(n="");var i=n.match(/^\[(.*)\]$/);return i&&i[1]&&(o={},$.each(t.arrParams,function(e,r){var n=t.getUrlParam("?"+i[1],r);n&&(o[r]=n)}),n=""),n||("a"===e[0].tagName.toLowerCase()?n=e.attr("href")||"":e.find("a").length&&(n=e.find("a").attr("href")||"")),n&&o&&(n+=-1===n.indexOf("?")?"?":"&",$.each(o,function(e,r){n=n+e+"="+r+"&"}),n=n.replace(/(.*)\&$/,"$1")),n},analysisRecord:function(e){var d=this,a=d.attr,r=$("["+a+"]");e&&d.elemObj[e]&&(d.elemObj[e]=[]),d.setIntersectObj(),r.each(function(e){var r=$(this),n=r.attr(a),t=d.getElemUrl(r),o=d.getSendInfo(t);if(o.pid||o.bid||o.rmmds){if(!1!==d.exModuleRecord(o))if(o.exInter&&d.intersect)d.intersect.observe(r[0]);else{var i=o.exModule||"common",c=d.elemObj[i];c=c||(d.elemObj[i]=[]),o.elem=r,c.push(o)}"false"!==o.exClick&&r.attr(d.attrClick,n)}r.removeAttr(a)}),d.registerRecord()},elemExOpr:function(c){var d=this,a=$(window).scrollTop(),s=$(window).height(),l=[],e=d.elemObj[c];e&&e.length&&($.each(e,function(e,r){var n,t=r.elem.offset().top,o=r.elem.height(),i=d.fixObj.common||0;("common"!==c&&(i+=d.fixObj[c]||0),1<o)?(i<t?n=t+o/2<=a+s&&a<=t+o/2-i:t<=i&&(n=t+o/2<=a+s),n&&window.nDC&&nDC.collectBanner?(d.exModuleOpr(r),d.sendRecordArr.push(r)):l.push(r)):l.push(r)}),d.elemObj[c]=l,d.collectSendInfo())},collectSendInfo:function(){var r=this;clearTimeout(r.sendCollectTimer),r.sendCollectTimer=setTimeout(function(){var n=[];if($.each(r.sendRecordArr,function(e,r){(r.bid||r.pid||r.rmmds)&&n.push('"'+(r.rmmds||"")+"|"+(r.bid||"")+"|"+(r.pid||"")+'"')}),n.length){var e="["+n.join(",")+"]";r.sendRecord({str:e})}r.sendRecordArr=[]},100)},exModuleRecord:function(e){var r,n=e.exModule;if(n&&(r=this.exModuleObj[n])&&-1<$.inArray(e.url,r))return!1},exModuleOpr:function(e){var r=e.url;if(e.exModule){var n=this.exModuleObj[e.exModule];n=n||(this.exModuleObj[e.exModule]=[]),-1===$.inArray(r,n)&&n.push(r)}},setIntersectObj:function(){var c=this;!c.intersect&&window.IntersectionObserver&&(c.intersect=new IntersectionObserver(function(e,i){$.each(e,function(e,r){if(0<r.intersectionRatio){var n=r.target;i.unobserve(n);var t=c.getElemUrl($(n),c.attrClick),o=c.getSendInfo(t);c.exModuleOpr(o),c.sendRecordArr.push(o),c.collectSendInfo()}})}))},initRecord:function(){this.analysisRecord(),$(document).on("scroll",this.registerRecord)},registerRecord:function(){var r=NCrecord;clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(function(){r.setFixTop(".index_head_cont"),$.each(r.elemObj,function(e){r.elemExOpr(e)})},500)},removeRecord:function(){var e=NCrecord;e.elemObj={},e.fixObj={},$(document).off("scroll",e.registerRecord)},sendRecord:function(e,r){if("string"==typeof e&&((e=this.getSendInfo(e)).str='["'+(e.rmmds||"")+"|"+(e.bid||"")+"|"+(e.pid||"")+'"]'),e.pid||e.bid||e.rmmds||e.str){var n={ac:r?"click":"show",callback:"nDCRecordExposure",vp:encodeURIComponent(this.vp),rp:encodeURIComponent(this.rp)};e.str&&(n.info=e.str),window.nDC&&nDC.collectBanner&&nDC.collectBanner(n)}},setFixTop:function(e,r){if(r=r||"common","number"==typeof e&&(this.fixObj[r]=e),"string"==typeof e){var n=$(e);n.length&&(this.fixObj[r]=n.height()||0)}},getSendInfo:function(t){var o=this;if(!t)return{};var e=o.getUrlPid(t),r=o.getUrlParam(t,"bid"),n=o.getUrlParam(t,"rmmds"),i={url:t,pid:e,bid:r,rmmds:n};return $.each(o.arrParams,function(e,r){var n=o.getUrlParam(t,r);n&&(i[r]=n)}),i},getUrlParam:function(e,r){var n=new RegExp("[?&]"+r+"=([^&]*)","i"),t=e.match(n);return t&&t[1]?t[1]:""},getUrlPid:function(e){var r=e.match(/p-(\d+).html/i);return r&&r[1]?r[1]:""}},$(function(){$.extend({sendExposureManualiy:function(e,r){var n=$.queryToObject(e);(n.pid||n.bid||n.rmmds)&&setTimeout(function(){NCrecord&&NCrecord.sendRecord(e),r&&r()},500)},sendExposureManualiyArr:function(e,r){var n=[],t=e.map(function(e){return NCrecord&&NCrecord.getSendInfo(e)});if($.each(t,function(e,r){(r.bid||r.pid||r.rmmds)&&n.push('"'+(r.rmmds||"")+"|"+(r.bid||"")+"|"+(r.pid||"")+'"')}),n.length){var o="["+n.join(",")+"]";NCrecord&&NCrecord.sendRecord({str:o})}}}),NCrecord.initRecord(),$(document).on("mousedown","["+NCrecord.attrClick+"]",function(e){var r=NCrecord.getElemUrl($(this),NCrecord.attrClick);NCrecord.sendRecord(r,!0)})}))});