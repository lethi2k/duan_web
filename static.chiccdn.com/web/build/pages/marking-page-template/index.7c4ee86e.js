require(["common/common"],function(e){require(["pages/marking-page-template/marking-page-template"])}),define("pages/marking-page-template/index",function(){}),define("common/require-plugins/require-css/css!pages/marking-page-template/marking-page-template",[],function(){}),define("common/statistic/iframe-track",[],function(){return{resolution:400,iframes:[],interval:null,Iframe:function(){this.element=arguments[0],this.cb=arguments[1],this.hasTracked=!1},track:function(e,n){if(this.iframes.push(new this.Iframe(e,n)),!this.interval){var t=this;this.interval=setInterval(function(){t.checkClick()},this.resolution)}},checkClick:function(){if(document.activeElement){var e=document.activeElement;for(var n in this.iframes)e===this.iframes[n].element?0==this.iframes[n].hasTracked&&(this.iframes[n].cb.apply(window,[]),this.iframes[n].hasTracked=!0):this.iframes[n].hasTracked=!1}}}}),define("pages/marking-page-template/marking-page-template",["require","css!pages/marking-page-template/marking-page-template","components/common-part/common-part","common/compiler/compiler","common/instance/event-bus","common/constants/index","common/utils/currency","common/utils/cookie","common/statistic/iframe-track","common/utils/url"],function(e){var n=(e("css!pages/marking-page-template/marking-page-template"),e("components/common-part/common-part")),t=(e("common/compiler/compiler"),e("common/instance/event-bus")),i=e("common/constants/index"),o=e("common/utils/currency"),c=e("common/utils/cookie"),a=e("common/statistic/iframe-track"),r=e("common/utils/url"),m={PRODUCT_PRICE:".discount_price, .cost_price",QUICK_BUY_BTN:".ms-template .quick-view > span"},s=function(){this._$el=$("body"),this._init()},u=s.prototype;u._init=function(){var e=this;new n({mptQuickBuySelector:m.QUICK_BUY_BTN,showRightSidebarImg:!1});t.on(i.CHANGE_CURRENCY,function(n){$(m.PRODUCT_PRICE).each(function(e,t){o.updatePrice(n,$(t))}),e._setPageCurrency(n)}),window.NcQuickLogin=function(){t.emit(i.QUICK_LOGIN,{afterLogin:function(){window.location.reload()},afterSignUp:function(){window.location.reload()}})},window.NcChangeCurrency=function(){var e=c.get("currency");t.emit(i.CHANGE_CURRENCY,e)},setTimeout(function(){var e=document.getElementsByClassName("js-video-hook");if(e.length)for(var n=0;n<e.length;n++)e[n].onload=function(){a&&a.track(e[n],function(){var t=e[n].getAttribute("data-point-id");t&&JGData.sendRec({point_id:t})})}},200),this._setPageCurrency(c.get("currency"))},u._setPageCurrency=function(e){var n=new r(window.location.href);n.query.currency_cdn!=e&&(n.query.currency_cdn=e,window.location.href=n)},new s});
//# sourceMappingURL=index.7c4ee86e.js.map
