require(["common/common"],function(t){require(["pages/clearance/clearance_v2"])}),define("pages/clearance/index_v2",function(){}),define("common/require-plugins/require-css/css!pages/clearance/clearance_v2",[],function(){}),define("common/require-plugins/require-css/css!pages/category/attributes-filter/attributes-filter",[],function(){}),define("common/require-plugins/require-html/html!pages/category/attributes-filter/attributes-filter",function(){return'<div class="border-bottom cate-filter--animated cate-filter cate-filter-js">\r\n  <div class="flex justify-content-between align-items-center btn-cursor cate-filter-head-js">\r\n    <span class="font-bold py-lg-15 attr-filter-title-js"></span>\r\n    <span class="lg-fit icon-toggle-container">\r\n      <i class="nc-icon nc-icon-plus cate-filter-head__close scale-secondary"></i>\r\n      <i class="nc-icon nc-icon-minus cate-filter-head__show scale-secondary"></i>\r\n    </span>\r\n  </div>\r\n  <div class="category-side-filter__body category-side-filter__body-js font-small">\r\n    <ul class="mx-lg-n5 cate-filter-list cate-filter-list-js">\r\n    </ul>\r\n  </div>\r\n  \r\n  <div class="category-side-filter__foot category-side-filter__foot-js font-small py-lg-5 d-none">\r\n    \r\n    <span class="btn-cursor text-hover-primary cate-filter-view-more cate-filter-view-more-js">{$LC_VIEW_MORE} <i class="nc-icon nc-icon-arrows-below-"></i></span>\r\n    <span class="btn-cursor text-hover-primary cate-filter-view-less cate-filter-view-less-js">{$LC_VIEW_LESS} <i class="nc-icon nc-icon-arrows-up-"></i></span>\r\n  </div>\r\n  \r\n</div>'}),define("pages/category/attributes-filter/attributes-filter",["require","css!pages/category/attributes-filter/attributes-filter","html!pages/category/attributes-filter/attributes-filter","common/compiler/compiler"],function(t){var e=(t("css!pages/category/attributes-filter/attributes-filter"),t("html!pages/category/attributes-filter/attributes-filter")),i=t("common/compiler/compiler"),a={TITLE:".attr-filter-title-js",NAME:".attr-item-name-js",ITEM_CONTAINER:".attr-item-container-js",BRAND_ITEM_CONTAINER:".brand-item-container-js",TRIGGER_ITEM:".item-trigger-js",BRAND_PIC:".brand-item-pic-js",LIST_CONTAINER:".cate-filter-list-js",HEAD:".cate-filter-head-js",TOGGLE_HEAD:".attrs-filter-toggle-js",FOOT:".category-side-filter__foot-js"},n={ACTIVE:"active",HIDE:"d-none",BRAND_SELECTED:"bg-grey-light-4",SELECTED:"checked",CATE_SELECTED:"text-underline",FLEX:"flex",TOGGLE_HEAD:"attrs-filter-toggle-js"},s={title:null,type:"list",list:[],isShow:!1,row:1,defaultShow:5,multiple:!1,onSelect:function(){},afterUpdate:function(){}},r=function(t){this.config=$.extend({},s,t),this.$el=$(i.compile(e)),this.hasMore=this.config.list.length>this.config.defaultShow*this.config.row,this.selectedArray=[],this.init()};return r.prototype.init=function(){this.$el.find(a.TITLE).text(this.config.title),this.config.isShow&&this.$el.addClass(n.ACTIVE),this.config.noToggle||this.$el.find(a.HEAD).addClass(n.TOGGLE_HEAD),this.config.list.length&&this.updateListView(this.config.list),this.showMoreView(),this.setListeners(),this.config.container.append(this.$el)},r.prototype.updateListView=function(t){var e=this,s=$("<div/>");this.config.row>1&&this.$el.find(a.LIST_CONTAINER).addClass(n.FLEX),this.config.isCateList?t.forEach(function(t,e){var a=$(i.compile('<li class="px-lg-10"><a class="text-hover-underline text-hover-primary text-grey-dark-1 text-ellipsis"></a></li>'));a.children().text(t.categories_name).attr("data-filter-id",t.categories_id),a.children().attr("href",t.url),t.selected&&a.children().addClass(n.CATE_SELECTED),e>4&&a.addClass("d-none"),s.append(a)}):this.config.isBrand?t.forEach(function(t,e){var r=$(i.compile('<li class="pb-lg-10 px-lg-5">                        <div class="brand-list-item__link flex align-items-center justify-content-center item-trigger-js brand-item-container-js" href="#">                          <img class="brand-list-item__pic brand-item-pic-js lazyload" data-src="" alt="Newchic" /></div></li>'));t.selected&&r.children().addClass(n.BRAND_SELECTED).addClass(n.SELECTED),r.find(a.BRAND_ITEM_CONTAINER).attr("title",t.brand_name).attr("data-filter-id",t.brand_id),r.find(a.BRAND_PIC).attr("data-src",t.logourl),e>9&&r.addClass("d-none"),s.append(r)}):(t.forEach(function(t,r){var c=$(i.compile('<li class="input-group" data-ga-trigger="click">                                          <div class="input-check-box checkbox text-ellipsis flex no-wrap text-grey-dark-1 text-hover-primary item-trigger-js attr-item-container-js">                                            <span class="nc-check-box-modal lg-fit"></span>                                            <span class="mx-lg-5 lgfit text-ellipsis attr-item-name-js"></span></div></li>'));t.selected&&c.find(a.ITEM_CONTAINER).addClass(n.SELECTED),c.find(a.ITEM_CONTAINER).attr("data-filter-id",t.filter_value_id),c.find(a.NAME).text(t.filter_value+" ("+t.amount+")"),c.attr("data-ga-event","category|top_"+e.config.cateName+"_"+e.config.title+"_"+t.filter_value+"_datalist_180508"),t.selected&&e.selectedArray.push(t.filter_value_id.toString()),r>4&&c.addClass("d-none"),e.config.isSize&&c.find(a.ITEM_CONTAINER).attr("data-filter-text",t.filter_value_text),s.append(c)}),this.config.afterUpdate(e.selectedArray)),this.$el.find(a.LIST_CONTAINER).append(s.children())},r.prototype.updateBrandListView=function(){$("<div/>");this.config.isShow&&this.$el.addClass(n.ACTIVE)},r.prototype.setListeners=function(){var t=this;this.$el.find(a.TOGGLE_HEAD).on("click",function(){t.$el.toggleClass(n.ACTIVE)}),this.$el.find(a.TRIGGER_ITEM).on("click",function(){var e=$(this),i=t.config.isSize?e.data("filter-text"):e.data("filter-id");e.hasClass(n.SELECTED)?t.config.onCancel(i.toString()):t.config.onSelect(i,t.selectedArray)}),this.$el.find(a.FOOT).on("click",function(){$(this).hasClass("more")?($(this).removeClass("more"),t.$el.find(".cate-filter-list li").each(function(e){e+1>t.config.defaultShow*t.config.row&&$(this).addClass("d-none")})):($(this).addClass("more"),t.$el.find(".cate-filter-list li").removeClass("d-none"))})},r.prototype.showMoreView=function(){this.hasMore?this.$el.find(a.FOOT).removeClass(n.HIDE):this.$el.find(a.LIST_CONTAINER).addClass("pb-lg-10")},r}),define("pages/category/format-href",["require","common/utils/url"],function(t){var e=t("common/utils/url"),i=function(){this._url=new e,this.query=this._url.query,this.path=this._url.path};return i.prototype.update=function(t){switch(t.type){case"attributes":this.updateAttrValue(t);break;case"size":case"brand":this.updateMoreValue(t);break;case"category":this.updateCateValue(t);break;case"price":this.updatePriceValue(t);break;case"ship":case"favorite":this.updateMoreValue(t);break;case"activity":break;case"newarrivals":this.updateMoreValue(t);break;case"customize":this.updateCustomize(t);break;default:this.updateQuery(t)}},i.prototype.updateAll=function(t){for(var e in t)"filter_value"!=e&&"attributes"!=e||this.update({type:"attributes"})},i.prototype.getAttrsType=function(t){this._url.path.indexOf(t)},i.prototype.updateQuery=function(t){t.cancel?this._url.query[t.type]&&(this._url.query[t.type]=""):this._url.query[t.type]=decodeURIComponent(t.id),this.resetHref()},i.prototype.clearAll=function(t){var e=this;t.forEach(function(t,i){"is"==t.type&&(e._url.path.match(/v-\d+(\,\d+)+\/|v-\d+\//g)&&(e._url.path=e._url.path.replace(/v-\d+(\,\d+)+\/|v-\d+\//g,"")),t.position_id&&(e._url.query.position_id="")),"brand"==t.type&&e._url.path.match(/brand-\d+/g)&&(e._url.path=e._url.path.replace(/\/brand-\d+/g,"")),"size"==t.type&&e._url.path.match(/size-[0-9a-zA-Z\.]+/g)&&(e._url.path=e._url.path.replace(/\/size-[0-9a-zA-Z\.]+/g,"")),"act"==t.type&&e._url.query.act&&delete e._url.query.act,"ship"==t.type&&e._url.path.match(/ship-\d+/g)&&(e._url.path=e._url.path.replace(/\/ship-\d+/g,"")),e._url.query.position_id=""}),this.resetHref()},i.prototype.updateAttrValue=function(t){var e=this.getAttrsValue();if(e.length){if(t.id&&-1==e.indexOf(t.id)&&e.push(t.id.toString()),t.cancel)if(t.prevId){var i=e.indexOf(t.prevId)>-1&&e.indexOf(t.prevId);e.splice(i,1)}else if(t.id){var i=e.indexOf(t.id)>-1&&e.indexOf(t.id);e.splice(i,1)}else e=[];if(e.length)var a="v-"+e.join(",")+"/";else var a="";this._url.path=decodeURIComponent(this._url.path).replace(/v-\d+(\,\d+)+\/|v-\d+\//g,a)}else t.id&&(this._url.path=decodeURIComponent(this._url.path)+"v-"+t.id+"/");this.resetHref()},i.prototype.getAttrsValue=function(t){var e=[],i=/v-\d+(\,\d+)+|v-\d+/g;if(this._url.path.match(i)){if(e=decodeURIComponent(this._url.path).match(i)[0].substr(2).split(","),t){var a=e.indexOf(t.toString());e.splice(a,1)}}return e},i.prototype.removeAttrsValue=function(t){},i.prototype.updateMoreValue=function(t){var e,i=this.getMoreValue(t);if(e="size"==t.type?new RegExp(t.type+"-[0-9a-zA-Z._]+\\/","g"):new RegExp(t.type+"-\\d+\\/","g"),i){if(t.cancel)this._url.path=this._url.path.replace(e,"");else if(this._url.path.match(e)){var a=t.type+"-"+t.id+"/";this._url.path=decodeURIComponent(this._url.path).replace(e,a)}}else t.cancel||(this._url.path=decodeURIComponent(this._url.path)+t.type+"-"+t.id+"/");this._url.query[t.query||t.type]&&(this._url.path[t.query||t.type]=t.id||""),this.resetHref()},i.prototype.getMoreValue=function(t){var e,i;return e="size"==t.type?new RegExp("\\/"+t.type+"-[0-9a-zA-Z._]+","g"):(t.type,new RegExp("\\/"+t.type+"-\\d+","g")),this._url.path.match(e)&&(i=decodeURIComponent(this._url.path).match(e)[0].substr(t.type.length+2)),i},i.prototype.updateCustomize=function(t){t.reg&&(this._url.path.match(t.reg)?t.replace?this._url.path=decodeURIComponent(this._url.path).replace(new RegExp(t.reg,"g"),decodeURIComponent(t.replace)):this._url.path=decodeURIComponent(this._url.path).replace(new RegExp(t.reg,"g"),""):this._url.path=decodeURIComponent(this._url.path)+t.replace),this.resetHref()},i.prototype.updateCateValue=function(t){t.reg;var e=/\/([a-z0-9\-]+)-c-\d+/g;if(this._url.path.match(e)){var i=this._url.path.match(e)[0].split("-c-")[0];this._url.path=decodeURIComponent(this._url.path).replace(e,i+"-c-"+t.id)}this._url.query[t.query||t.type]&&(this._url.query[t.query||t.type]=t.id),this.resetHref()},i.prototype.getCateValue=function(t){var e,i=/\/([a-z0-9\-]+)-c-\d+/g;return this._url.path.match(i)&&(e=decodeURIComponent(this._url.path).match(i)[0].split("-c-")[1]),e},i.prototype.updatePriceValue=function(t){var e=/price-\d+\.?\d{0,2}\-\d+\.?\d{0,2}\//g;t.cancel?this._url.path=decodeURIComponent(this._url.path).replace(e,""):this._url.path.match(e)?this._url.path=decodeURIComponent(this._url.path).replace(e,"price-"+t.min+"-"+t.max+"/"):this._url.path=decodeURIComponent(this._url.path)+"price-"+t.min+"-"+t.max+"/",this.resetHref()},i.prototype.getPriceValue=function(){var t,e=/price-\d+\.?\d{0,2}\-\d+\.?\d{0,2}/g;return this._url.path.match(e)&&(t=decodeURIComponent(this._url.path).match(e)[0].substr(6).split("-")),t},i.prototype.resetHref=function(){window.history&&window.history.replaceState&&window.history.replaceState(null,null,decodeURIComponent(this._url))},i}),define("common/require-plugins/require-css/css!components/product/product-smarty-ajax/product-smarty-ajax",[],function(){}),define("common/require-plugins/require-html/html!components/product/product-smarty-ajax/product-smarty-ajax",function(){return'<div class="product-item  product-item--hover justify-content-center mx-lg-15 position-relative">\r\n  <div class="product-item-wrap flex position-relative product-item-outer-js">\r\n    <div class="lg-fit product-item-wrap-inner">\r\n      <div class="product-item__pic product-item__pic-js flex position-relative">\r\n        <a class="align-items-center text-center product-item-link-js product-item-pic-container-js" href="" data-exposure-record="[exInter=true]"> \r\n          <img class="product-item-pic-js lazyload" alt="" data-src="">\r\n        </a>\r\n        <span class="product-item-discount product-item-discount-container-js hidden"><span class="product-item-discount-js"></span>% OFF</span>\r\n        <div class="product-quick-buy quick-buy-js" data-product-id="" data-product-src=""  data-quick-rmmds=""><i class="nc-icon nc-icon-quick-view"></i> {$LC_BUY_NOW} </div>\r\n        <div class="product-sale-logo flex align-items-center justify-content-center product-logo-js d-none">\r\n          <span class="font-middle text-ellipsis font-bold product-sale-logo-text product-logo-text-js"></span>\r\n        </div>\r\n      </div>\r\n      <div class="product-item__bottom">\r\n        <div class="flex no-wrap justify-content-between" style="line-height:1;">\r\n          <div class="flex align-items-end product-item-price-container-js">\r\n            <strong class="product-item-final-price-js price font-middle font-bold text-primary" oriprice=""></strong>\r\n          </div>\r\n          <span class="lg-fit product-item__wish btn-cursor product-item__wish-js" data-product-id="" data-toggle="tooltip" title="{$LC_ADD_TO_MY_FAVORITES}">\r\n            <div class="product-item__wish-inner-js">\r\n              <i class="nc-icon  product-item__wish-heart-js"></i>\r\n              <em class="text-normal font-small product-item__wish-num-js"></em>\r\n            </div>\r\n          </span>\r\n        </div>\r\n        <p class="flex mt-lg-5 align-items-center product-item-name product-item-name-conatiner-js">\r\n          <a class="lg text-ellipsis d-block text-hover-underline font-small text-grey-dark-1 product-item-name-js product-item-link-js" href=""></a>\r\n        </p>\r\n        <div class="product-item-activity product-item-activity-conatiner-js flex align-items-center pt-lg-15 mx-lg-n5"></div>\r\n      </div>\r\n    </div>\r\n    <div class="image-view-swiper position-absolute lg-fit">\r\n      <div class="ui-swiper-container image-view-swiper-js ">\r\n        <ul class="ui-swiper-list ui-swiper-list-js"></ul>\r\n      </div>  \r\n    </div>\r\n    \r\n  </div>\r\n\r\n</div>'}),define("components/product/product-smarty-ajax/product-smarty-ajax",["require","css!components/product/product-smarty-ajax/product-smarty-ajax","html!components/product/product-smarty-ajax/product-smarty-ajax","common/compiler/compiler","common/instance/event-bus","common/constants/index","common/utils/url","common/statistic/ncdc-rd"],function(t){var e=(t("css!components/product/product-smarty-ajax/product-smarty-ajax"),t("html!components/product/product-smarty-ajax/product-smarty-ajax")),i=t("common/compiler/compiler"),a=t("common/instance/event-bus"),n=t("common/constants/index"),s=t("common/utils/url"),r=t("common/statistic/ncdc-rd"),c={HIDDEN:"hidden",REC_PRODUCT:"product-item__pic--rect",SQUARE_PRODUCT:"product-item__pic--square",WITH_SHUMB:"product-item-wrap--poa",IS_COD:"iscod-product-js",PRODUCT_THUMB_LIST_IMG:"product-image-thumbnail-js",PRODUCT_RANK:"product-item-rank-js"},o={QUICK_BUY:".quick-buy-js",PRODUCT_PIC_CONTAINER:".product-item__pic-js",PRODUCT_OUTER:".product-item-outer-js",PRODUCT_LINK:".product-item-link-js",PRODUCT_IMG_CONTAINER:".product-item-pic-container-js",PRODUCT_IMG:".product-item-pic-js",PRODUCT_DISCOUNT_CONTAINER:".product-item-discount-container-js",PRODUCT_DISCOUNT:".product-item-discount-js",PRODUCT_PRICE_CONTAINER:".product-item-price-container-js",PRODUCT_FINAL_PRICE:".product-item-final-price-js",PRODUCT_WISH_LIST_BTN:".product-item__wish-js",PRODUCT_WISH_LIST_NUM:".product-item__wish-num-js",PRODUCT_NAME_CONTAINER:".product-item-name-conatiner-js",PRODUCT_NAME:".product-item-name-js",PRODUCT_ACTIVITY_CONTAINER:".product-item-activity-conatiner-js",PRODUCT_BRAND:".product-item-brand-js",IS_COD:"."+c.IS_COD,PRODUCT_THUMB_LIST:".ui-swiper-list-js",PRODUCT_THUMB_LIST_IMG:"."+c.PRODUCT_THUMB_LIST_IMG,PRODUCT_RANK:"."+c.PRODUCT_RANK},l={},p=function(t){this._config=$.extend({},l,t),this._$el=$(i.compile(e)),this._showDiscountActivityArr=[2,3,4,5,6,17,18,19,20,21,22,23],this._init()},d=p.prototype;return d._init=function(){var t=this;this._config.productClass&&this._$el.addClass(this._config.productClass),this._config.thumbList&&this._config.thumbList.length>0&&(this._$el.find(o.PRODUCT_OUTER).addClass(c.WITH_SHUMB),this._config.thumbList.forEach(function(e,i){if(i<5){var a=$('<li class="ui-swiper-slide mb-lg-5 btn-cursor lazyload-before-img"><img class="'+c.PRODUCT_THUMB_LIST_IMG+' lazyload" data-src="  '+e.list_grid+'" alt="'+t._config.productName+" - "+e.color+'" data-large-image="'+e.view+'"></li>');t._$el.find(o.PRODUCT_THUMB_LIST).append(a)}}));var e=new s(this._config.url);if(!e.query.rmmds&&this._config.rmmds&&(e.query.rmmds=this._config.rmmds),this._$el.find(o.PRODUCT_LINK).attr("href",e),this._$el.find(o.PRODUCT_IMG).attr({"data-src":this._config.imgUrl,alt:this._config.productName}),this._showDiscountActivityArr.indexOf(parseInt(this._config.listType))>-1&&(this._$el.find(o.PRODUCT_DISCOUNT).text(this._config.discount),this._$el.find(o.PRODUCT_DISCOUNT_CONTAINER).removeClass(c.HIDDEN)),this._config.rmmds?this._$el.find(o.QUICK_BUY).attr({"data-product-id":this._config.productId,"data-product-src":this._config.url+"?rmmds="+this._config.rmmds,"data-quick-rmmds":this._config.rmmds}):this._$el.find(o.QUICK_BUY).attr({"data-product-id":this._config.productId,"data-product-src":this._config.url}),this._$el.find(o.PRODUCT_FINAL_PRICE).attr("oriprice",this._config.finalPrice).text(this._config.formatFinalPrice),this._showDiscountActivityArr.indexOf(parseInt(this._config.listType))>-1&&this._$el.find(o.PRODUCT_PRICE_CONTAINER).append('<del class="font-small text-grey price mx-lg-5" oriprice="'+this._config.salePrice+'">'+this._config.formatSalePrice+"</del>"),this._config.inWishlist?this._$el.find(o.PRODUCT_WISH_LIST_BTN).find("i").addClass("nc-icon-my-wishlist-hover text-primary").removeClass("nc-icon-my-wishlist"):this._$el.find(o.PRODUCT_WISH_LIST_BTN).find("i").addClass("nc-icon-my-wishlist").removeClass("nc-icon-my-wishlist-hover text-primary"),this._$el.find(o.PRODUCT_WISH_LIST_BTN).attr("data-product-id",this._config.productId),this._$el.find(o.PRODUCT_WISH_LIST_NUM).text(this._config.wishlistNum),this._config.hideWishlist&&this._$el.find(o.PRODUCT_WISH_LIST_BTN).addClass("hidden"),this._config.rankNum&&this._$el.find(o.PRODUCT_PIC_CONTAINER).append($(i.compile('<span class="product-item__rank '+c.PRODUCT_RANK+'">'+this._config.rankNum+"</span>"))),this._config.brandName){var a;a=this._config.brandUrl?this._config.brandUrl:"#",this._$el.find(o.PRODUCT_NAME_CONTAINER).prepend('<a class="lg-fit text-primary font-small px-lg-5 product-item-brand product-item-brand-js" href="'+a+'">'+this._config.brandName+"</a>"),this._$el.find(o.PRODUCT_NAME).addClass("mx-lg-5")}if(this._$el.find(o.PRODUCT_NAME).text(this._config.productName),this._config.isNewarrival||this._config.codCountry||this._config.isFreeShipping||this._config.listType||this._config.shipmentMinFee>0&&this._config.shipmentMinFee<this._config.finalPrice&&this._config.shipmentText){var n="";this._config.isNewarrival&&(n+='<span class="product-icon-new px-lg-2 font-small mx-lg-5">NEW</span>'),this._updateCod(this._config.currentCountryCode)&&(n+='<i class="nc-icon nc-icon-cash-on-delivery product-item-activity-icon mx-lg-5 '+c.IS_COD+'" data-toggle="tooltip" title="cash on delivery"></i>'),this._config.isFreeShipping&&(n+='<i class="nc-icon nc-icon-free-shipping product-item-activity-icon mx-lg-5"></i>'),this._config.shipmentMinFee>0&&this._config.shipmentMinFee<this._config.finalPrice&&this._config.shipmentText&&(n+='<span class="mx-lg-5 flex no-wrap btn-cursor"><i class="nc-icon nc-icon-free-shipping nc-icon-free-shipping-js product-item-activity-icon tooltip-html-js" data-toggle="tooltip"><span class="d-none tooltip-html-content-js">'+this._config.shipmentText+"</span></i></span>"),2==this._config.listType?this._config.actDesc&&(n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-special product-item-activity-icon"></i><span class="font-small px-lg-5 active-name">{$LA_PRODUCT_DETAIL_SPECIAL}'+this._config.actDesc+"</span></span>")):3==this._config.listType?n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-flash-deals product-item-activity-icon"></i><span class="font-small px-lg-5 active-name">{$LC_FLASH_DEALS}</span></span>'):4==this._config.listType||5==this._config.listType?n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-clearance product-item-activity-icon"></i><span class="text-primary px-lg-5 active-name-clearance font-small">{$LC_CATEGORY_CLEARANCE}</span></span>'):6==this._config.listType?n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-flash-deals product-item-activity-icon"></i><span class="font-small px-lg-5 active-name">{$LC_LIGHTNING_DEALS}</span></span>'):8==this._config.listType?n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-presell product-item-activity-icon"></i><span class="font-small px-lg-5 active-name text-capitalize">{$LA_ORDERS_STATUS_NAME_17}</span></span>'):16==this._config.listType?n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-clearance product-item-activity-icon"></i><span class="font-small px-lg-5 active-name">{$LC_SUPER_CLEARANCE}</span></span>'):17==this._config.listType&&this._config.activityTips?n+=i.compile('<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-special product-item-activity-icon"></i><span class="font-small px-lg-5 active-name">'+this._config.activityTips+"</span></span>"):19!=this._config.listType&&21!=this._config.listType&&22!=this._config.listType||this._config.activityTips&&(n+='<span class="mx-lg-5 flex no-wrap"><i class="nc-icon nc-icon-special product-item-activity-icon"></i><span class="font-small px-lg-5 active-name">'+this._config.activityTips+"</span></span>"),this._$el.find(o.PRODUCT_ACTIVITY_CONTAINER).html(n)}this._config.logoProImage&&this._config.logoProImage.list_image&&this._config.logoProImage.list_description&&(this._$el.find(".product-logo-js").removeClass("d-none").css({"background-image":"url("+this._config.logoProImage.list_image+")"}),this._$el.find(".product-logo-text-js").text(this._config.logoProImage.list_description)),"fullReduction"==this._config.pageName&&(this._$el.removeClass("product-item--hover"),this._$el.find(o.PRODUCT_DISCOUNT).text(this._config.discount),this._$el.find(o.PRODUCT_DISCOUNT_CONTAINER).removeClass(c.HIDDEN),this._$el.find(o.PRODUCT_WISH_LIST_BTN).addClass("hidden"),this._$el.find(o.PRODUCT_NAME).removeClass("text-hover-underline"),this._$el.find(o.PRODUCT_PRICE_CONTAINER).append('<del class="font-small text-grey price mx-lg-5" oriprice="'+this._config.salePrice+'">'+this._config.formatSalePrice+"</del>"),this._$el.find(o.PRODUCT_LINK).addClass("text-secondary quick-buy-js").removeClass("text-grey-dark-1").attr({href:"javascript:;","data-product-id":this._config.productId,"data-product-src":this._config.url,"data-quick-rmmds":this._config.rmmds,"data-exposure-record":this._config.url+"?rmmds="+this._config.rmmds}),this._$el.find(o.PRODUCT_BRAND)&&this._$el.find(o.PRODUCT_BRAND).addClass("quick-buy-js").attr({"data-product-id":this._config.productId,"data-product-src":this._config.url,"data-quick-rmmds":this._config.rmmds})),this._config.container.append(this._$el),this._addListener(),this._updateToolTip(),this._setTrackCode(),$(document).on("click",".money-list-select-js",function(){setTimeout(function(){t._updateToolTip(!0)},1e3)})},d._addListener=function(){var t=this;this._$el.find(o.PRODUCT_THUMB_LIST_IMG).on("mouseenter",function(){var e=$(this),i=t._$el.find(o.PRODUCT_IMG),a=t._$el.find(o.PRODUCT_IMG_CONTAINER),n=e.attr("data-large-image");a.loading("show"),i.attr("src",n),a.find("img").on("load",function(){a.loading("hide")})}),this._$el.find(o.PRODUCT_WISH_LIST_BTN).on("click",function(){if(!$(this).hasClass(c.ACTIVE)){var e=t._config.productId,i=$(this);i.find(".product-item__wish-inner-js").loading("show",{spinnerSize:"small"}),a.emit(n.ADD_TO_WISHLIST,e,{afterAddWishlit:function(e){e.status?(t._$el.find(o.PRODUCT_WISH_LIST_NUM).text(e.wishCount),i.addClass(c.ACTIVE).find(".nc-icon").removeClass("nc-icon-my-wishlist").addClass("nc-icon-my-wishlist-hover text-primary"),$("body").message("show",{type:"success",content:e.message})):e.noLogin?a.emit(n.QUICK_LOGIN,{afterLogin:function(t){window.location.reload()},afterSignUp:function(){window.location.reload()}}):(i.addClass(c.ACTIVE).find(".nc-icon").removeClass("nc-icon-my-wishlist").addClass("nc-icon-my-wishlist-hover text-primary"),$("body").message("show",{type:"success",content:e.message})),i.find(".product-item__wish-inner-js").loading("hide")}}),r.sendEvent({products_id:e,ac:"wish",r_position:t._config.rmmds,vp:t._config.url+"?rmmds="+t._config.rmmds,r_page:window.rpage||""})}})},d._updateToolTip=function(t){var e=this;this._$el.find('[data-toggle="tooltip"]').each(function(){if($(this).find(".tooltip-html-content-js").length){var i={trigger:"hover",html:!0,placement:"bottom",title:e._$el.find(".tooltip-html-content-js").html()};t&&(i._resetCurrency=t),$(this).tooltip(i)}else $(this).tooltip({placement:"top"})})},d._setTrackCode=function(){this._config.linkTrack&&this._$el.find(o.PRODUCT_LINK).attr("data-ga-trigger",this._config.linkTrack.trigger).attr("data-ga-event",this._config.linkTrack.event),this._config.linkPointId&&this._$el.find(o.PRODUCT_LINK).attr("data-point-id",this._config.linkPointId),this._config.wishListTrack&&this._$el.find(o.PRODUCT_WISH_LIST_BTN).attr("data-ga-trigger",this._config.wishListTrack.trigger).attr("data-ga-event",this._config.wishListTrack.event)},d._updateCod=function(t){return this._config.codCountry.split(",").indexOf(t)>-1},p}),define("common/require-plugins/require-css/css!components/pagination/pagination-small",[],function(){}),define("components/pagination/pagination-small",["require","common/compiler/compiler","css!components/pagination/pagination-small"],function(t){var e=t("common/compiler/compiler"),i=(t("css!components/pagination/pagination-small"),{template:'<div class="simple-page">                <span class="page-small-link font-small pre-page-js"><i class="nc-icon nc-icon-angle-left d-inline-block"></i></span>                <span class="text-primary mr-lg-5 current-page-js"></span>/                <span class="total-page-js"></span>                <span class="page-small-link font-small next-page-js"><i class="nc-icon nc-icon-angle-right d-inline-block"></i></span></div>',currentPage:1,firstPage:1,totalPage:1,pagesize:10,onChangePage:function(){}}),a=function(t){this._config=$.extend({},i,t),this._$element=$(e.compile(this._config.template)),this._init()},n=a.prototype;return n._init=function(){var t=this;this._config.container.append(this._$element),this._$element.find(".page-small-link:not(.disable)").on("click",function(){var e=$(this).attr("data-to-page");t._changePage(e)})},n._changePage=function(t){this._config.onChangePage(t),this._setCurrentPage(t)},n._setCurrentPage=function(t){this._$element.find(".current-page-js").text(t),t==this._config.firstPage?this._$element.find(".pre-page-js").addClass("disabled"):this._$element.find(".pre-page-js").removeClass("disabled"),t==this._config.lastPage?this._$element.find(".next-page-js").addClass("disabled"):this._$element.find(".next-page-js").removeClass("disabled"),this._$element.find(".pre-page-js").attr("data-to-page",parseInt(t)-1),this._$element.find(".next-page-js").attr("data-to-page",parseInt(t)+1)},n._updatePage=function(t){totalPage=t<=0?this._config.firstPage:Math.ceil(t/this._config.pagesize),this._$element.find(".total-page-js").text(totalPage),this._config.lastPage!=totalPage&&(this._config.lastPage=totalPage,this._setCurrentPage(this._config.firstPage))},a}),define("components/pagination/pagination",["require"],function(t){var e='<li class="page-item disabled"><a class="page-link">...</a></li>',i=function(t){this._windowSize=t.windowSize||4,this._pageSize=t.pageSize||10,this._firstPage=t.firstPage||1,this._lastPage=t.lastPage||1,this._currentPage=this._firstPage,this._onChangePage=t.onChangePage||function(){},this._beforeDestroy=t.beforeDestroy||function(){},this._limitPageShow=t.limitPage||0,this._$container=$(t.container),this._init()},a=i.prototype;return a._init=function(){var t=this;this._$el=$('<ul class="pagination"></ul>'),this._$pre=$('<li class="page-item page-item-first"><a class="page-link"><i class="nc-icon nc-icon-arrows-left-"></i></a></li>'),this._$next=$('<li class="page-item page-item-next"><a class="page-link"><i class="nc-icon nc-icon-arrows-right-"></i></a></li>'),this._$el.on("click",".page-link",function(e){var i=parseInt($(e.currentTarget).attr("data-to-page"));t._changePage(i)}),this._$container.append(this._$el),this.setCurrentPage(this._currentPage)},a.setCurrentPage=function(t){this._currentPage=t,this._update()},a.updateTotalPage=function(t){t=t<=0?1:Math.ceil(t/this._pageSize),this._lastPage!==t&&(this._lastPage=t,this.setCurrentPage(this._firstPage))},a.updateTotalPageNum=function(t){t=t<=0?1:t,this._limitPageShow>=t?this._$container.addClass("hidden"):this._$container.removeClass("hidden"),this._lastPage!==t&&(this._lastPage=t,this.setCurrentPage(this._firstPage))},a._changePage=function(t){this._currentPage!=t&&(this._onChangePage(t),this.setCurrentPage(t))},a._update=function(){var t=this._updateState();t.isFirstPage?this._$pre.addClass("disabled"):this._$pre.removeClass("disabled"),t.isLastPage?this._$next.addClass("disabled"):this._$next.removeClass("disabled");for(var i=[],a=t.start;a<=t.end;a++){var n=$('<li class="page-item"><a class="page-link">'+a+"</a></li>");n.find(".page-link").attr("data-to-page",a),this._currentPage===a&&n.addClass("active"),i.push(n)}if(t.startEllipsis&&t.start-1>this._firstPage&&i.unshift($(e)),t.start>this._firstPage){var s=$('<li class="page-item"><a class="page-link">'+this._firstPage+"</a></li>");s.find(".page-link").attr("data-to-page",this._firstPage),i.unshift(s)}if(t.endEllipsis&&t.end+1<this._lastPage&&i.push($(e)),t.end<this._lastPage){var r=$('<li class="page-item"><a class="page-link">'+this._lastPage+"</a></li>");r.find(".page-link").attr("data-to-page",this._lastPage),i.push(r)}this._$pre.find(".page-link").attr("data-to-page",this._currentPage-1),this._$next.find(".page-link").attr("data-to-page",this._currentPage+1),this._$el.empty().append(this._$pre,i,this._$next)},a._updateState=function(){var t={};this._currentPage===this._firstPage&&(t.isFirstPage=!0),this._currentPage===this._lastPage&&(t.isLastPage=!0);var e=this._getShownPages(this._currentPage,this._windowSize,this._firstPage,this._lastPage);return t.start=e.start,t.end=e.end,t.startEllipsis=e.startEllipsis,t.endEllipsis=e.endEllipsis,t},a._getShownPages=function(t,e,i,a){var n={start:i,end:a};if(a-i+1<=e)return n;var s=parseInt(e/2);return n.start=t-s,n.end=t+s,n.start<i?(n.start=i,n.end=i+e-1):n.end>a&&(n.end=a,n.start=a-e+1),n.start>i&&(n.startEllipsis=!0),n.end<a&&(n.endEllipsis=!0),n},a.destroy=function(){this._beforeDestroy(),this._$el.off("click")},i}),define("common/require-plugins/require-css/css!pages/category/price-filter/price-filter",[],function(){}),define("common/require-plugins/require-html/html!pages/category/price-filter/price-filter",function(){return'<div class="pb-lg-15">\r\n  <ul class="price-rate-container flex price-rate-container-js mb-lg-15"></ul>\r\n  <div class="price-input-container price-input-container-js">\r\n    <form class="flex">\r\n      <div class="lg"><input class="form-control price-filter-input price-filter-min-js" type="text"></div>\r\n      <span class="lg-fit mx-lg-5 flex align-items-center">-</span>\r\n      <div class="lg"><input class="form-control price-filter-input price-filter-max-js" type="text"></div>\r\n      <span class="btn-small btn-secondary mx-lg-5 flex align-items-center btn-cursor btn-price-submit-js"><span class="px-lg-5">Go</span></span>\r\n    </form>\r\n  </div>\r\n</div>'}),
define("pages/category/price-filter/price-filter",["require","css!pages/category/price-filter/price-filter","html!pages/category/price-filter/price-filter","common/compiler/compiler","common/utils/currency"],function(t){var e=(t("css!pages/category/price-filter/price-filter"),t("html!pages/category/price-filter/price-filter")),i=t("common/compiler/compiler"),a=t("common/utils/currency"),n={currency:a.getCurrency()||"USD"},s=function(t){this.config=$.extend({},n,t),this.$el=$(i.compile(e)),this.init()};return s.prototype.init=function(){if(this.config.rateList&&this.updateRateView(this.config.rateList),this.config.priceInfo){if("USD"!=this.config.currency)var t=this.config.priceInfo.min?a._calcPrice(this.config.currency,this.config.priceInfo.min).toFixed(2):"",e=this.config.priceInfo.max?a._calcPrice(this.config.currency,this.config.priceInfo.max).toFixed(2):"";this.$el.find(".price-filter-min-js").val(t||this.config.priceInfo.min),this.$el.find(".price-filter-max-js").val(e||this.config.priceInfo.max),this.config.min=this.config.priceInfo.min,this.config.max=this.config.priceInfo.max}else this.$el.find(".price-filter-min-js").val(""),this.$el.find(".price-filter-max-js").val("");this.config.rateList&&this.updateRateView(this.config.rateList),this.setListeners(),this.config.container.append(this.$el)},s.prototype.updateCurrency=function(t){this.config.currency=t,(this.config.priceInfo||this.config.min||this.config.max)&&(this.$el.find(".price-filter-min-js").val(a._calcPrice(this.config.currency,this.config.min).toFixed(2)),this.$el.find(".price-filter-max-js").val(a._calcPrice(this.config.currency,this.config.max).toFixed(2)))},s.prototype.resetPrice=function(){this.$el.find(".price-filter-min-js").val(""),this.$el.find(".price-filter-max-js").val(""),this.$el.find(".price-rate-container-js li").removeClass("selected"),this.config.min="",this.config.max=""},s.prototype.updateRateView=function(t){var e=this,a=e.config.min,n=e.config.max,s=$("<ul/>"),r=i.compile("{$LA_CATE_PRODUCTS_NUM_TIPS}");t.length&&(t.length&&t.forEach(function(t,e){var c=$(i.compile('<li class="price-rate-item lg flex align-items-end" data-toggle="tooltip" data-title=""><div class="price-rate price-rate-js lg"></div></li>'));c.attr("title",r.replace("%s",t.percent+"%")),c.find(".price-rate").css({height:t.percent+"%"}),a==t.min&&(n==t.max||"0"==n&&"*"==t.max)&&c.addClass("selected"),c.attr("data-min",parseFloat(t.min)?parseFloat(t.min):"0").attr("data-max",parseFloat(t.max)?parseFloat(t.max):"0"),s.append(c)}),this.$el.find(".price-rate-container-js").empty().append(s.children()),this.$el.find('[data-toggle="tooltip"]').tooltip({placement:"top",classNames:"category-tootip"}))},s.prototype.resetCalcPrice=function(t){var e=parseFloat(a._calcPrice(this.config.currency,t)).toFixed(2),i=parseFloat(e.replace(/\.\d+/,""));return e>i||e<i?e:i},s.prototype.setListeners=function(){var t=this;this.$el.on("mouseenter",".price-rate-container-js li",function(){var e=$(this),i=a._calcPrice(t.config.currency,e.data("min")).toFixed(2),n=a._calcPrice(t.config.currency,e.data("max")).toFixed(2);t.$el.find(".price-filter-min-js").val(i),t.$el.find(".price-filter-max-js").val(n)}).on("mouseleave",".price-rate-container-js",function(){!t.config.min&&t.config.max?(t.$el.find(".price-filter-min-js").val(""),t.$el.find(".price-filter-max-js").val(t.resetCalcPrice(t.config.max))):!t.config.max&&t.config.min?(t.$el.find(".price-filter-max-js").val(""),t.$el.find(".price-filter-min-js").val(t.resetCalcPrice(t.config.min))):t.config.min||t.config.max?(t.$el.find(".price-filter-max-js").val(t.resetCalcPrice(t.config.max)),t.$el.find(".price-filter-min-js").val(t.resetCalcPrice(t.config.min))):(t.$el.find(".price-filter-max-js").val(""),t.$el.find(".price-filter-min-js").val(""))}),this.$el.on("click",".price-rate-container-js li",function(){var e=$(this);t.config.min=e.data("min"),t.config.max=e.data("max"),e.toggleClass("selected").siblings().removeClass("selected"),t.config.onSelect&&t.config.onSelect(t.config.min,t.config.max)}),this.$el.find(".btn-price-submit-js").on("click",function(){"USD"!=t.config.currency?(t.config.min=a._calcPriceToUSD(t.config.currency,t.$el.find(".price-filter-min-js").val()).toFixed(2),t.config.max=a._calcPriceToUSD(t.config.currency,t.$el.find(".price-filter-max-js").val()).toFixed(2)):(t.config.min=t.$el.find(".price-filter-min-js").val()||0,t.config.max=t.$el.find(".price-filter-max-js").val()||0),(t.config.min||t.config.max)&&(parseFloat(t.config.min)>parseFloat(t.config.max)&&parseFloat(t.config.max)?(t.config.onSelect&&t.config.onSelect(t.config.max,t.config.min),t.$el.find(".price-filter-min-js").val(t.config.max),t.$el.find(".price-filter-max-js").val(t.config.min)):t.config.onSelect&&t.config.onSelect(t.config.min,t.config.max))}),this.$el.find(".price-filter-min-js, .price-filter-max-js").on("keyup",function(){t.$el.find(".price-rate-container-js li").removeClass("selected");var e=$(this).val();/^\d+\.?\d{0,2}$/.test(e)?$(this).val(e):e.match(/^\d+\.?\d{0,2}/)?$(this).val(e.match(/^\d+\.?\d{0,2}/)):$(this).val(""),$(this).hasClass("price-filter-min-js")?t.config.min=a._calcPriceToUSD(t.config.currency,$(this).val()).toFixed(2):t.config.max=a._calcPriceToUSD(t.config.currency,$(this).val()).toFixed(2)})},s}),define("common/require-plugins/require-css/css!components/product/view-more/view-more-product/view-more-product",[],function(){}),define("common/require-plugins/require-html/html!components/product/view-more/view-more-product/view-more-product",function(){return'<div class="view-more-product flex align-items-start">\r\n  <div class="more-product-item flex column justify-content-center align-items-center position-relative product-item-more-js">\r\n    <a class="more-product-item-link product-item-more-link-js">\r\n      <img class="product-item-more-img product-item-more-img-js" src="" alt="">\r\n    </a>\r\n    <div class="position-absolute view-more-desc">\r\n      <p class="mb-lg-30 text-uppercase text-white text-center font-size-24 view-more-text-js">{$LA_VIEW_MORE}</p>\r\n      <span class="view-more-product-icon">\r\n        <i class="nc-icon nc-icon-angle-right font-huge font-bold"></i>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}),define("components/product/view-more/view-more-product/view-more-product",["require","css!components/product/view-more/view-more-product/view-more-product","html!components/product/view-more/view-more-product/view-more-product","common/compiler/compiler"],function(t){var e=(t("css!components/product/view-more/view-more-product/view-more-product"),t("html!components/product/view-more/view-more-product/view-more-product")),i=t("common/compiler/compiler"),a={template:e,name:null,cls:null,url:null,imgUrl:null},n=function(t){this._config=$.extend({},a,t),this._$element=$(i.compile(this._config.template)),this._init()};return n.prototype._init=function(){this._config.name&&this._$element.find(".view-more-text-js").text(this._config.name),this._config.cls&&this._$element.addClass(this._config.cls),this._config.container.append(this._$element),this._config.url&&this._$element.find(".product-item-more-link-js").attr("href",this._config.url),this._config.imgUrl&&this._$element.find(".product-item-more-img-js").attr("src",this._config.imgUrl)},n}),define("pages/clearance/clearance_v2",["require","css!pages/clearance/clearance_v2","common/view/view","common/compiler/compiler","components/common-part/common-part","common/utils/http","pages/category/attributes-filter/attributes-filter","pages/category/format-href","components/product/product-smarty-ajax/product-smarty-ajax","components/pagination/pagination-small","components/pagination/pagination","common/instance/lazyload","pages/category/price-filter/price-filter","components/product/view-more/view-more-product/view-more-product","common/utils/cookie","common/utils/currency","common/instance/event-bus","common/constants/index"],function(t){var e=(t("css!pages/clearance/clearance_v2"),t("common/view/view")),i=t("common/compiler/compiler"),a=t("components/common-part/common-part"),n=t("common/utils/http"),s=t("pages/category/attributes-filter/attributes-filter"),r=t("pages/category/format-href"),c=t("components/product/product-smarty-ajax/product-smarty-ajax"),o=t("components/pagination/pagination-small"),l=t("components/pagination/pagination"),p=t("common/instance/lazyload"),d=t("pages/category/price-filter/price-filter"),u=t("components/product/view-more/view-more-product/view-more-product"),g=t("common/utils/cookie"),m=t("common/utils/currency"),f=t("common/instance/event-bus"),h=t("common/constants/index"),_={FILTERCONTAINER:".cate-side-container-js",CATEGORY_LIST:".cate-list-container-js",BRAND_LIST:".brand-filter-container-js",ATTRS_CONTAINER:".attrs-filter-container-js",PRICE_CONTAINER:".price-filter-container-js",TAG_CONTAINER:".seleted-attr-container-js",TAG_LIST_CONTAINER:".tag-filter-container-js",TAG_TEXT:".tag-filter-text-js",BTN_CLEAR_ATTR:".btn-clear-attr-js",BTN_CLEAR_ALL_ATTR:".btn-clear-all-attr-js"};i.install(window.I18N);var v={name:"clearance",pageData:{cat_id:window.cat_id||0,pagesize:59,page:1,default_rule_country_cdn:g.get("default_rule_country")||"223",currency_cdn:g.get("currency")||"USD",cdn_lang:$("html").attr("lang")||"en",conversionType:g.get("_conversionType")||"US"},defaultCurrency:m.getCurrency()||"USD",selectFilters:[],attrFilterMap:[],init:function(){var t=this;this.commonPart=new a,this.updateHref(),this.setPage(),this.attrFilterMap=this._url.getAttrsValue(),this.pageData.filter_value=this.attrFilterMap.join(","),this.pageData.size=this._url.getMoreValue({type:"size"})||this._url.query.size||"",this.pageData.sort=parseFloat(this._url.query.sort)||null,this.pageData.act=parseFloat(this._url.query.act)||null;var e=this._url.getPriceValue();e&&(this.pageData.pfrom=e[0],this.pageData.pto=e[1]),"newarrival"==window.pageName&&(this.pageData.ship=this._url.getMoreValue({type:"ship"})||this._url.query.ship||null),this._urlData={},this.ajaxGetProductList(),$(window).on("scroll",function(){var e=$(window).scrollTop();t._scroll(e)}),$(".cate-side-list-js").mCustomScrollbar({scrollInertia:200,scrollButtons:{enable:!1},advanced:{updateOnContentResize:!0},callbacks:{onScroll:function(t,e){$(".cate-side-list-js .mCSB_container").height()-$(".cate-side-list-js").height()>t.draggerTop&&$(".cate-side-list-js").mCustomScrollbar("update")}}}),$(".cate-side-list-js").css({height:$(window).height()-t.commonPart.getHeaderHeight()}),f.on(h.CHANGE_CURRENCY,function(e){t.priceFilter.updateCurrency(e),$(".price").each(function(i,a){m.updatePrice(e,$(a)),t.defaultCurrency=e})}),this.setListeners()},ajaxGetProductList:function(t){var e,i=$.Deferred(),a=this,s=window.location.href;return $("body").loading("show",{type:"fixed"}),"clearance"==window.pageName?e="/api/clearance/getClearanceProductsList/":"newarrival"==window.pageName&&(e="/api/newarrival/getProductsList/"),n.get({url:e,params:a.pageData}).then(function(e){$("body").loading("hide"),a.removeFrameLoading(),200==e.code&&(a.updatePageView(e.result,t),a.notFirstPage&&setTimeout(function(){Rd.sendEvent({ac:"view",rp:s,vp:window.location.href}),Rd.sendPageVisitRecord(s,window.location.href)},500),a.notFirstPage=!0),a.pageData.getBanner&&delete a.pageData.getBanner,i.resolve(e)}),i.promise()},updatePageView:function(t,e){$(_.FILTERCONTAINER).empty(),this.updateCateList(t.new_catNavs),this.updateSubCateList(t.categoryList),this.updateSelectedFilters(t.selectFilters),this.updateAttrFilter(t.catFilters),this.updateProductsList(t.list,t.end_products_image),this.setPriceFilterView(t.price_group),this.updateSortList(t.sortList),this.updateSale(),"newarrival"==window.pageName&&this.updateShipment(),this.pageSimple._updatePage(t.pageInfo.total),this.pageSimple._setCurrentPage(parseFloat(this.pageData.page)),this.pagination.updateTotalPage(t.pageInfo.total),this.pagination.setCurrentPage(parseFloat(this.pageData.page)),p.update(),this.selectFilters=t.selectFilters,this.scrollPageTop()},scrollPageTop:function(){$("html, body").animate({scrollTop:0},300),setTimeout(function(){$(".cate-side-list-js").mCustomScrollbar("scrollTo","top")},500)},updateCateList:function(t){var e=$("<div/>");t.length&&(t.forEach(function(t,a){var n=$(i.compile('<li class="btn btn-tab mx-lg-5 mb-lg-15">1</li>'));t.name&&n.html(t.name),t.categories_name&&n.html(t.categories_name),n.attr("data-cate-id",t.categories_id),n.attr("data-name",t.en_name),t.active&&n.addClass("active"),e.append(n)}),$(".cate-filters-categories-js").empty().append(e.children()))},resetPageData:function(t){var e=["cat_id","currency_cdn","default_rule_country_cdn","pagesize","page","getBanner","sort","cdn_lang","conversionType"];if(t instanceof Array){var i=e.concat(t);for(var a in this.pageData)-1==i.indexOf(a)&&(this.pageData[a]="")}else{e.push(t);for(var a in this.pageData)-1==e.indexOf(a)&&(this.pageData[a]="")}this.attrFilterMap=[],this.pageData.page=1},clearAllUrlData:function(){var t=["cat_id","currency_cdn","default_rule_country_cdn","pagesize","page","getBanner","sort","cdn_lang","conversionType"];for(var e in this.pageData)-1!=t.indexOf(e)||this.pageData[e].length||("filter_value"==e?this._url.update({type:"attributes",cancel:!0}):"brand_id"==e?this._url.update({type:"brand",cancel:!0}):"pfrom"==e||"pto"==e?(this._url.update({type:"price",cancel:!0}),this.priceFilter.resetPrice()):this._url.update({type:e,cancel:!0}))},setPage:function(){var t=this;this.pageSimple=new o({container:$(".cate-page-small-container-js"),pagesize:t.pageData.pagesize,onChangePage:function(e){t.pageData.page=e,t.ajaxGetProductList().then(function(){}),t.pagination.setCurrentPage(parseInt(e))}}),this.pagination=new l({container:$(".cate-pagination-container-js"),pageSize:t.pageData.pagesize,lastPage:1,onChangePage:function(e){t.pageData.page=e,t.ajaxGetProductList().then(function(){}),t.pageSimple._setCurrentPage(parseInt(e)),$("html, body").animate({scrollTop:0},"fast")}})},updateSubCateList:function(t){var e=this;t&&t.length?($(_.CATEGORY_LIST).removeClass("d-none"),this.subCateList=new s({container:$(_.CATEGORY_LIST).empty(),title:i.compile("{$LC_WEB_CATEGORIES}"),list:t,isShow:!0,noToggle:!0,cateName:e.cateName,isCateList:!0,addCls:"",onSelect:function(t){e.pageData.cat_id=t,e.pageData.page=1,e.ajaxGetProductList().then(function(i){e._url.update({type:"category",query:"cat_id",id:t})})}})):$(_.CATEGORY_LIST).addClass("d-none")},updateSelectedFilters:function(t){var e=this,a=$("<ul/>");t&&t.length?($(_.TAG_CONTAINER).removeClass("d-none"),t.forEach(function(t,n){var s=$(i.compile('<li class="d-inline-block bg-grey-light-5 flex px-lg-5 ma-lg-5 pa-lg-2 attr-filter-tag"><span class="mx-lg-5 tag-filter-text-js"></span><span class="btn-clear-attr-js  btn-cursor"><i class="nc-icon nc-icon-close- d-inline-flex align-items-center"></i></span></li>'));if(s.find(_.BTN_CLEAR_ATTR).attr("data-value",t.value).attr("data-type",t.type),"price"==t.type){var r=m.getCurrencySymbol();t.pfrom&&!t.pto?s.find(_.TAG_TEXT).html('> <span class="price" oriprice="'+t.pfrom+'">'+r+m._calcPrice(e.defaultCurrency,t.pfrom).toFixed(2)+"</span>"):t.pto&&!t.pfrom?s.find(_.TAG_TEXT).html('< <span class="price" oriprice="'+t.pto+'">'+r+m._calcPrice(e.defaultCurrency,t.pto).toFixed(2)+"</span>"):s.find(_.TAG_TEXT).html('<span class="price" oriprice="'+t.pfrom+'">'+r+m._calcPrice(e.defaultCurrency,t.pfrom).toFixed(2)+'</span> - <span class="price" oriprice="'+t.pto+'">'+r+m._calcPrice(e.defaultCurrency,t.pto).toFixed(2)+"</span>")}else s.find(_.TAG_TEXT).text(t.name);a.append(s)}),$(_.TAG_LIST_CONTAINER).empty().append(a.children())):$(_.TAG_CONTAINER).addClass("d-none")},updateBrandList:function(t){var e=this;t.filter_values.length?($(_.BRAND_LIST).removeClass("d-none"),new s({container:$(_.BRAND_LIST).empty(),title:t.filter_name,list:t.filter_values,cateName:e.cateName,isShow:!0,isBrand:!0,row:2,addCls:"",onSelect:function(t){e.pageData.brand_id=t,e.pageData.page=1,e.ajaxGetProductList().then(function(i){e._url.update({type:"brand",query:"brand_id",id:t})})},onCancel:function(t){e.pageData.brand_id="",e.pageData.page=1,e.ajaxGetProductList().then(function(t){e._url.update({type:"brand",query:"brand_id",cancel:!0})})}})):$(_.BRAND_LIST).addClass("d-none")},updateAttrFilter:function(t,e){var i=this,a=$("<div/>");t&&t.forEach(function(t,e){new s({container:a,title:t.filter_name,cateName:i.cateName,list:t.filter_values,isShow:!0,afterUpdate:function(t){},onSelect:function(e,a){var n=this;if(n.cancelId=!1,n._urlData={},t.is_size){var s=e.toString().indexOf("_")>-1?e.toString().split("_")[1]:e;i.pageData.size=s,n._urlData={type:"size",id:s}}else a.length&&i.attrFilterMap.forEach(function(t,e){a.indexOf(t)>-1&&(i.attrFilterMap.splice(e,1),n.cancelId=t)}),i.attrFilterMap.push(e.toString()),i.pageData.filter_value=i.attrFilterMap.join(","),n._urlData={type:"attributes",id:e,prevId:n.cancelId.toString(),cancel:!!n.cancelId};return i.pageData.page=1,i.ajaxGetProductList(t.filter_id).then(function(t){i._url.update(n._urlData)})},onCancel:function(e){var a=this;return a._urlData={},i.attrFilterMap=i._url.getAttrsValue(e),i.pageData.filter_value=i.attrFilterMap.join(","),t.is_size?(i.pageData.size="",a._urlData={type:"size",cancel:!0}):a._urlData={type:"attributes",id:e.toString(),prevId:e.toString(),cancel:!0},i.pageData.page=1,i.ajaxGetProductList().then(function(t){i._url.update(a._urlData)})}})}),$(_.ATTRS_CONTAINER).empty().append(a)},updateProductsList:function(t,e){var i=$("<div/>"),a=this;t&&t.length?(t.forEach(function(t,e){new c({container:i,isRec:window.productImgShape,thumbList:t.colorImages,brandName:t.brand_name,brandUrl:t.brand_url,productId:t.products_id,discount:t.discount,logoProImage:t.logo_pro_image,url:t.url,imgUrl:t.image_url,rmmds:"newarrival"==window.pageName?"weekly_new":"clearance",finalPrice:t.final_price,formatFinalPrice:t.format_final_price,salePrice:t.products_price,formatSalePrice:t.format_products_price,inWishlist:t.wishlist,wishlistNum:t.wish_count,productName:t.products_name,listType:t.list_type,isNewarrival:t.is_new,currentCountryCode:a.commonPart.getHeaderCountryInfo().abbr,codCountry:t.codCountry,activityTips:t.tip,actDesc:t.actDesc,mjnz:t.mjnz})}),$(".no-product-js").addClass("d-none"),$(".cate-pagination-container-js").removeClass("d-none"),$(".product-list-js").removeClass("d-none").empty().append(i.children()),t.length>=a.pageData.pagesize&&new u({container:$(".product-list-js"),name:"next",cls:"mx-lg-15 product-item",imgUrl:e}),setTimeout(function(){window.NCrecord&&window.NCrecord.analysisRecord()},500)):(a.noProduct=!0,$(".product-list-js").addClass("d-none"),$(".no-product-js").removeClass("d-none"),$(".cate-pagination-container-js").addClass("d-none"),$(".cate-side-list-js").css({height:"auto"}))},updateSortList:function(t){var e=this,a=$("<ul/>");if(!e.sortList){$(".cate-sort-selected-js").text(t[0].sortName);var n=this.pageData.sort;e.sortList=t,t.forEach(function(t,s){var r=$(i.compile('<li class="dropdown-item flex justify-content-between" data-value="">                    <span class="text-secondary cate-sort-list-text-js"></span><i class="nc-icon nc-icon-success-solid"></li>'));(n&&n==t.sortID||!n&&0==s)&&(r.addClass("selected"),$(".cate-sort-selected-js").text(t.sortName)),r.find(".cate-sort-list-text-js").text(t.sortName),r.attr("data-value",t.sortID),r.on("click",function(){var t=$(this),i=t.data("value");e.pageData.page=1,e.pageData.sort=i,e.ajaxGetProductList().then(function(){t.addClass("selected").siblings().removeClass("selected"),$(".cate-sort-selected-js").text(t.text()),e._url.update({type:"sort",id:i})})}),a.append(r)}),$(".cate-sort-list-js").html(a.children())}},updateActCheck:function(t){t.LogoInfo&&t.LogoInfo.infoDetail.filter_icons_url&&($(".cate-logo-check-js").removeClass("d-none").find(".cate-logo-img-js").attr("src",t.LogoInfo.infoDetail.filter_icons_url),this.pageData.is_logo?$(".cate-logo-check-js .input-check-box").addClass("checked"):$(".cate-logo-check-js .input-check-box").removeClass("checked"))},setPriceFilterView:function(t){var e=this;m.getCurrency();if(this.priceFilter)this.priceFilter.updateRateView(t);else{new s({container:$(".price-filter-container-js").empty(),title:i.compile("{$LA_PRICE_RANGE_NAME}"),list:[],isShow:!0}),$(".price-filter-container-js .category-side-filter__body-js").empty();var a={min:e.pageData.pfrom,max:e.pageData.pto};this.priceFilter=new d({container:$(".price-filter-container-js .category-side-filter__body-js"),priceInfo:!!e._url.getPriceValue()&&a,rateList:t,onSelect:function(t,i){e.pageData.pfrom=t,e.pageData.pto=i,e.pageData.page=1,e.ajaxGetProductList().then(function(t){e._url.update({type:"price",min:e.pageData.pfrom,max:e.pageData.pto})})}})}},updateShipment:function(){parseFloat(this.pageData.ship)?$(".cate-ship-checkbox-js").addClass("checked"):$(".cate-ship-checkbox-js").removeClass("checked")},updateSale:function(){this.pageData.act?$(".cate-sale-checkbox-js").addClass("checked"):$(".cate-sale-checkbox-js").removeClass("checked")},updateHref:function(t){this._url=new r},removeFrameLoading:function(){$(".cate-nav-frame-loading").remove(),$(".frame-loading").removeClass("frame-loading")},setListeners:function(){var t=this;$(document).on("click",".product-item-more-js",function(){t.pageData.page=parseFloat(t.pageData.page)+1,t.ajaxGetProductList(),$("html, body").animate({scrollTop:0},"fast"),t.pagination.setCurrentPage(parseFloat(t.pageData.page)),t.pageSimple._setCurrentPage(parseFloat(t.pageData.page))}),$(document).on("click",_.BTN_CLEAR_ATTR,function(){var e=$(this),i=e.data("type"),a=e.attr("data-value");if("is"==i){var n=t.attrFilterMap.indexOf(a);t.attrFilterMap.splice(n,1),t.pageData.filter_value=t.attrFilterMap.join(","),t.ajaxGetProductList().then(function(e){t._url.update({type:"attributes",id:a,cancel:!0}),e.result.selectFilters.length||$(_.TAG_CONTAINER).addClass("d-none")})}else"price"==i?(t.pageData.pfrom="",t.pageData.pto="",t.ajaxGetProductList().then(function(e){t._url.update({type:"price",cancel:!0}),t.priceFilter.resetPrice()})):("brand"==i?t.pageData.brand_id="":t.pageData[i]="",t.ajaxGetProductList().then(function(e){t._url.update({type:i,cancel:!0}),e.result.selectFilters.length||$(_.TAG_CONTAINER).addClass("d-none")}))}),$(".cate-filters-categories-js").on("click",".btn-tab",function(){var e=$(this),i=e.data("cate-id"),a=e.data("name"),n=t.pageData.cat_id;e.hasClass("active")||(t.resetPageData(),t.pageData.cat_id=i,t.pageData.getLocation=1,t.ajaxGetProductList().then(function(e){e.result.baseData.location&&($(".breadcrumb-container-js").html(e.result.baseData.location),delete t.pageData.getLocation),t.clearAllUrlData(),a&&"all"!=a?(a=a.toLowerCase(),a=a.replace(/\'/g,"").replace(/\s/g,"-").replace(/&/g,"and"),t._url.update({type:"customize",reg:"([a-z0-9\\-]+)-"+n+"/",replace:a+"-"+i+"/"})):t._url.update({type:"customize",reg:"([a-z0-9\\-]+)-"+n+"/",replace:""})}))}),$(".cate-logo-check-js").on("click",function(){t.pageData.is_logo=t.pageData.is_logo?"":1,t.ajaxGetProductList().then(function(){t._url.update({type:"is_logo",id:t.pageData.is_logo})})}),$(_.BTN_CLEAR_ALL_ATTR).on("click",function(){t.resetPageData(["page"]),t.selectFilters.length&&t.ajaxGetProductList().then(function(){$(_.TAG_CONTAINER).addClass("d-none"),t.clearAllUrlData()})}),$(".cate-ship-checkbox-js").on("click",function(){var e=$(this),i=e.hasClass("checked");t.pageData.page=1,t.pageData.ship=i?0:1,t.ajaxGetProductList().then(function(){t._url.update({type:"ship",id:t.pageData.ship})})}),$(document).on("click",".fix-sidebar-top-js",function(){setTimeout(function(){$(".cate-side-list-js").mCustomScrollbar("scrollTo","top")},300)}),$(".cate-sale-checkbox-js").on("click",function(){var e=$(this),i=e.hasClass("checked");t.pageData.page=1,t.pageData.act=i?0:1,t.ajaxGetProductList().then(function(){t._url.update({type:"act",id:t.pageData.act})})})},_scroll:function(t){var e=this,i=this.commonPart.getHeaderHeight(),a=$(".cate-filters-container-js").height(),n=$(".cate-products-js").height(),s=$(".cate-filters-container-js").offset().top,r=$(".cate-side-list-js");r.height();if(r)if(t>s&&n>r.height()){if(t>s+n-r.height()){var c=s+n-r.height()-t;r.css({transform:"translateY("+c+"px)",transition:"unset"})}else $(".header-top-container-js").hasClass("show")?(r.css({transform:"translateY("+i+"px)",height:e.noProduct?"auto":$(window).height()-i,transition:"transform 0.3s ease-out 0s"}),r.mCustomScrollbar("update")):(r.css({position:"fixed",transform:"translateY(0)",height:e.noProduct?"auto":$(window).height(),transition:"transform 0.3s ease-out 0s"}),r.mCustomScrollbar("update"));var o=s+n-2*r.height();r.height();$(".header-top-container-js").hasClass("show")?t<r.height()&&r.mCustomScrollbar("scrollTo","top"):(t>o&&r.mCustomScrollbar("scrollTo","bottom"),e.scrollerTimer||(e.scrollerTimer=setTimeout(function(){clearTimeout(e.scrollerTimer)},500)))}else $(".header-top-container-js").hasClass("show")&&t+i>=s||r.css({position:"relative",transform:"translateY(0)",transition:"unset"})}};e.component(v),e.createComponent(v)});
//# sourceMappingURL=index_v2.39d21278.js.map
